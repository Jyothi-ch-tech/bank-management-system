{% extends "base.html" %}
{% block title %}Transactions | MyBank{% endblock %}
{% block content %}
<div class="row">
  <!-- Deposit + Withdraw -->
  <div class="col-md-6">
    <div class="card p-4 mb-3">
      <h5>Deposit Money</h5>
      <form method="post">
        <input type="hidden" name="action" value="deposit">
        <div class="mb-3">
          <label class="form-label">Amount</label>
          <input type="number" step="0.01" name="amount" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Description (optional)</label>
          <input type="text" name="description" class="form-control">
        </div>
        <button class="btn btn-success w-100">Deposit</button>
      </form>
    </div>
    <div class="card p-4">
      <h5>Withdraw Money</h5>
      <form method="post">
        <input type="hidden" name="action" value="withdraw">
        <div class="mb-3">
          <label class="form-label">Amount</label>
          <input type="number" step="0.01" name="amount" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Description (optional)</label>
          <input type="text" name="description" class="form-control">
        </div>
        <button class="btn btn-warning w-100">Withdraw</button>
      </form>
    </div>
  </div>

  <!-- Account + History -->
  <div class="col-md-6">
    <div class="card p-4 mb-3">
      <h5>Account Info</h5>
      <p><strong>Account No:</strong> {{ account.account_number }}</p>
      <p><strong>Balance:</strong> ₹{{ '%.2f'|format(account.balance) }}</p>
    </div>
    <div class="card p-4">
      <h5>Transaction History</h5>
      {% if transactions %}
        <table class="table table-sm">
          <thead>
            <tr>
              <th>Date</th>
              <th>Type</th>
              <th>Amount</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            {% for tx in transactions %}
              <tr>
                <td>{{ tx.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
                <td class="text-capitalize">{{ tx.type }}</td>
                <td>₹{{ '%.2f'|format(tx.amount) }}</td>
                <td>{{ tx.description or '-' }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="text-muted">No transactions yet.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
